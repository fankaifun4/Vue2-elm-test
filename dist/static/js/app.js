webpackJsonp([3],{"1RaD":function(t,e){},"2Mud":function(t,e){},IhLR:function(t,e){},"Lm/y":function(t,e){},NHnr:function(t,e,n){"use strict";function s(t){n("xxqs")}function i(t){n("IhLR")}function o(t){n("wo40")}function a(t){n("P0OH")}function r(t){n("2Mud")}function c(t){n("1RaD")}function u(t){n("Lm/y")}function l(t){n("o4Ct")}function d(t){n("T569")}Object.defineProperty(e,"__esModule",{value:!0});var m=n("5vqR"),h=n("2sCs"),f=n.n(h),v={name:"app",data:function(){return{transitionName:"router-pop-out"}},watch:{$route:function(t,e){var n=t.path.split("/").length,s=e.path.split("/").length;console.log(),this.transitionName=n<s?"router-pop-out":"router-pop-in"}}},p=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{attrs:{id:"app"}},[n("transition",{attrs:{name:t.transitionName}},[n("router-view")],1)],1)},g=[],_={render:p,staticRenderFns:g},C=_,x=n("/Xao"),M=s,y=x(v,C,!1,M,null,null),S=y.exports,b=n("zO6J"),E=n("lC5x"),w=n.n(E),$=n("J0Oq"),R=n.n($),L=n("4YfN"),k=n.n(L),F=n("9rMa"),I={name:"vonther",props:["icon","msg","name","url"],data:function(){return{msgs:{icon:"",msg:"",name:"",url:""}}}},N=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"msg-wrap-onther"},[n("div",{staticClass:"onther-icon"},[n("img",{attrs:{src:t.icon,alt:""}})]),t._v(" "),n("div",{staticClass:"msg-other"},[n("div",{staticClass:"onther-ji"}),t._v(" "),n("div",{staticClass:"msg-content"},[t._v(t._s(t.msg)),n("a",{attrs:{href:t.url}},[t._v(t._s(t.url))])])])])},T=[],P={render:N,staticRenderFns:T},B=P,H=n("/Xao"),G=i,A=H(I,B,!1,G,"data-v-7d89f419",null),q=A.exports,O={name:"vuserMsg",props:["icon","msg","name"],data:function(){return{userMsgs:{icon:"",msg:"",name:""}}}},X=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"msg-wrap-user"},[n("div",{staticClass:"msg-user"},[n("div",{staticClass:"msg-content"},[t._v(t._s(t.msg))]),t._v(" "),n("div",{staticClass:"user-ji"})]),t._v(" "),n("div",{staticClass:"user-icon"},[n("img",{attrs:{src:t.icon,alt:""}})])])},D=[],j={render:X,staticRenderFns:D},z=j,U=n("/Xao"),J=o,V=U(O,z,!1,J,"data-v-4951b85e",null),Q=V.exports,Y={name:"vHeader",data:function(){return{}},mounted:function(){},methods:{goPath:function(){this.$store.dispatch("changeNav","homeMsg"),this.$router.push("/vx/home")}}},K=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("header",{staticClass:"header"},[n("div",{staticClass:"titles"},[n("div",{staticClass:"iconfont icon-prev",on:{click:t.goPath}}),t._v(" "),n("div",[t._v(t._s(this.$route.query.name))])]),t._v(" "),t._m(0)])},W=[function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"find-set"},[n("div",{staticClass:"find iconfont icon-tubiao-copy"}),t._v(" "),n("div",{staticClass:"set iconfont icon-jia1"})])}],Z={render:K,staticRenderFns:W},tt=Z,et=n("/Xao"),nt=a,st=et(Y,tt,!1,nt,"data-v-2dc8820d",null),it=st.exports,ot={name:"vFooter",data:function(){return{msg:"",isSend:!1}},mounted:function(){},methods:{sendMsg:function(){0!=this.msg.length&&""!=this.msg&&(this.$emit("sendMsg",this.msg),this.msg="",this.$refs.input.focus())}},watch:{msg:function(){this.msg.length>0||""!=this.msg?this.isSend=!0:this.isSend=!1}}},at=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("footer",{staticClass:"footer"},[n("input",{directives:[{name:"model",rawName:"v-model",value:t.msg,expression:"msg"}],ref:"input",staticClass:"msg-box",domProps:{value:t.msg},on:{keyup:function(e){if(!("button"in e)&&t._k(e.keyCode,"enter",13,e.key))return null;t.sendMsg(e)},input:function(e){e.target.composing||(t.msg=e.target.value)}}}),t._v(" "),n("div",{staticClass:"iconfont  icon-xiaolian",on:{click:t.sendMsg}}),t._v(" "),n("div",{directives:[{name:"show",rawName:"v-show",value:!t.isSend,expression:"!isSend"}],staticClass:"iconfont  icon-add_c",on:{click:t.sendMsg}}),t._v(" "),n("div",{directives:[{name:"show",rawName:"v-show",value:t.isSend,expression:"isSend"}],staticClass:"send-msg",on:{click:t.sendMsg}},[t._v("发送")])])},rt=[],ct={render:at,staticRenderFns:rt},ut=ct,lt=n("/Xao"),dt=r,mt=lt(ot,ut,!1,dt,"data-v-31198a5a",null),ht=mt.exports,ft={name:"vsendMsg",data:function(){return{msgConcat:[],rootmsg:"",msgBodyId:this.$route.query.id}},components:{rootMsg:q,userMsg:Q,vHeader:it,vFooter:ht},updated:function(){this.$nextTick(function(){var t=this.$refs.contentBody;t.scrollTop=t.scrollHeight})},mounted:function(){var t=this;this.store.dispatch("setUser","fankx");var e=this.$route.query;this.store.dispatch("chatRecord",k()({},e));var n=this.msgLog;if(n.some(function(e,n,s){return e.name==t.msgBodyId})){var s=n.filter(function(e){if(e.name==t.msgBodyId)return e}),i=s[0].msg,o=[];i.forEach(function(t){var e={};for(var n in t)e[n]=t[n];o.push(e)}),o.length<=10?this.msgConcat=o:this.msgConcat=o.slice(-10)}else{var a={name:this.msgBodyId,msg:[]};this.store.dispatch("toMsgLog",a),this.postMsg("/api","hello")}},computed:k()({},Object(F.c)(["userId","msgLog","userIcon"]),Object(F.b)(["setUser","toMsgLog","insertMSG"]),{store:function(){return this.$store}}),methods:{sendMsgs:function(t){this.userMsgBody(t,this.msgBodyId),this.postMsg("/api",t)},postMsg:function(t,e){var n=this;return R()(w.a.mark(function s(){var i;return w.a.wrap(function(s){for(;;)switch(s.prev=s.next){case 0:return s.next=2,n.send(t,e);case 2:i=s.sent,n.roobyMsgBody(i,n.msgBodyId);case 4:case"end":return s.stop()}},s,n)}))()},send:function(t,e){return this.$http.post(t,{key:"91fac65ebd2d4ae39f57b5af071326ae",info:e||"",userId:this.userId}).then(function(t){if(t.status)return t.data})},userMsgBody:function(t,e){var n={component:"user-msg",msg:t,icon:this.$route.query.userIcon,name:this.userId};this.msgConcat.push(n),this.store.dispatch("insertMSG",{name:e,msgBody:n})},roobyMsgBody:function(t,e){var n={component:"root-msg",msg:t.text,url:t.url||"",icon:this.$route.query.icon,name:"robby"};this.msgConcat.push(n),this.store.dispatch("insertMSG",{name:e,msgBody:n})}}},vt=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"container"},[n("v-header"),t._v(" "),n("section",{ref:"contentBody",staticClass:"content"},t._l(t.msgConcat,function(t,e){return n("div",{key:e},[n("keep-alive",[n(t.component,{tag:"component",attrs:{icon:t.icon,url:t.url,msg:t.msg,name:t.name}})],1)],1)})),t._v(" "),n("v-footer",{on:{sendMsg:t.sendMsgs}})],1)},pt=[],gt={render:vt,staticRenderFns:pt},_t=gt,Ct=n("/Xao"),xt=c,Mt=Ct(ft,_t,!1,xt,"data-v-43e21d0a",null),yt=Mt.exports,St={name:"pageSendMsg",data:function(){return{}},components:{sendMsg:yt}},bt=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("section",[n("send-msg")],1)},Et=[],wt={render:bt,staticRenderFns:Et},$t=wt,Rt=n("/Xao"),Lt=Rt(St,$t,!1,null,null,null),kt=Lt.exports,Ft={name:"vhHeader",data:function(){return{}}},It=function(){var t=this,e=t.$createElement;t._self._c;return t._m(0)},Nt=[function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("header",{staticClass:"header"},[n("div",{staticClass:"titles"},[n("div",[t._v("迷你微信（1）")])]),t._v(" "),n("div",{staticClass:"find-set"},[n("div",{staticClass:"find iconfont icon-tubiao-copy"}),t._v(" "),n("div",{staticClass:"set iconfont icon-jia1"})])])}],Tt={render:It,staticRenderFns:Nt},Pt=Tt,Bt=n("/Xao"),Ht=u,Gt=Bt(Ft,Pt,!1,Ht,"data-v-703a6aec",null),At=Gt.exports,qt={props:["changePath","states"],data:function(){return{cur:"homeMsg"}},mounted:function(){var t=this.$store.state.navSelect;this.cur=t},computed:{navSelect:function(){return this.$store.state.navSelect}},methods:{goPath:function(t,e){this.$emit("changePath",t,e)}},watch:{navSelect:function(){var t=this.navSelect;this.cur=t}}},Ot=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"nav-wrap"},[n("ul",{staticClass:"nav"},[n("li",{on:{click:function(e){t.goPath("/vx/home","homeMsg")}}},[n("p",{staticClass:"iconfont icon-qipao",class:{on:"homeMsg"==t.cur}}),t._v(" "),n("p",{staticClass:"icondes",class:{on:"homeMsg"==t.cur}},[t._v("微信")])]),t._v(" "),n("li",{on:{click:function(e){t.goPath("/vx/list/mail-list","mailList")}}},[n("p",{staticClass:"iconfont icon-tongxunlu1",class:{on:"mailList"==t.cur}}),t._v(" "),n("p",{staticClass:"icondes",class:{on:"mailList"==t.cur}},[t._v("通讯录")])]),t._v(" "),n("li",{on:{click:function(e){t.goPath("/vx/list/find","find")}}},[n("p",{staticClass:"iconfont icon-iconcopy",class:{on:"find"==t.cur}}),t._v(" "),n("p",{staticClass:"icondes",class:{on:"find"==t.cur}},[t._v("发现")])]),t._v(" "),n("li",{on:{click:function(e){t.goPath("/vx/list/me","me")}}},[n("p",{staticClass:"iconfont icon-iconfontyonghu",class:{on:"me"==t.cur}}),t._v(" "),n("p",{staticClass:"icondes",class:{on:"me"==t.cur}},[t._v("我")])])])])},Xt=[],Dt={render:Ot,staticRenderFns:Xt},jt=Dt,zt=n("/Xao"),Ut=l,Jt=zt(qt,jt,!1,Ut,"data-v-c62e6d80",null),Vt=Jt.exports,Qt={name:"pageHome",data:function(){return{linkChange:"linkChange",selectNav:this.$store.state.navSelect}},components:{vhHeader:At,vhfooterRouteNav:Vt},methods:{changePath:function(t,e){this.$store.dispatch("changeNav",e),this.$router.push(t)}}},Yt=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("section",{staticClass:"main-container"},[n("vh-header"),t._v(" "),n("transition",{attrs:{name:"list-body",mode:"out-in"}},[n("router-view")],1),t._v(" "),n("vhfooter-route-nav",{attrs:{states:t.selectNav},on:{changePath:t.changePath}})],1)},Kt=[],Wt={render:Yt,staticRenderFns:Kt},Zt=Wt,te=n("/Xao"),ee=d,ne=te(Qt,Zt,!1,ee,"data-v-36a68a33",null),se=ne.exports;m.a.use(b.a);var ie,oe=new b.a({routes:[{path:"/vx",component:se,children:[{path:"home",name:"homeMsg",default:!0,component:function(t){return n.e(0).then(function(){return n("DiCr")}.bind(null,n)).catch(n.oe)}},{path:"list/mail-list",name:"mailList",component:function(t){return n.e(0).then(function(){return n("uWQK")}.bind(null,n)).catch(n.oe)}},{path:"list/find",name:"find",component:function(t){return n.e(0).then(function(){return n("/z2b")}.bind(null,n)).catch(n.oe)}},{path:"list/me",name:"find",component:function(t){return n.e(0).then(function(){return n("d3gx")}.bind(null,n)).catch(n.oe)}}]},{path:"/vx/asend",name:"asend",component:kt},{path:"/vx/detail",name:"detial",component:function(t){return n.e(0).then(function(){return n("yZ3x")}.bind(null,n)).catch(n.oe)}},{path:"*",redirect:"/vx/home"}]}),ae={setUser:function(t,e){(0,t.commit)("SETUSER",e)},toMsgLog:function(t,e){(0,t.commit)("MSGLOG",e)},insertMSG:function(t,e){(0,t.commit)("INSERTMSG",e)},changeNav:function(t,e){(0,t.commit)("CHANGENAV",e)},deleteMsg:function(t,e){(0,t.commit)("DELETEMSG",e)},chatRecord:function(t,e){(0,t.commit)("CHATRECORD",e)}},re=n("a3Yh"),ce=n.n(re),ue=(ie={},ce()(ie,"SETUSER",function(t,e){t.userId=e}),ce()(ie,"MSGLOG",function(t,e){t.msgLog.push(e)}),ce()(ie,"INSERTMSG",function(t,e){var n=t.msgLog;if(!(n.length<1))for(var s=0;s<n.length;s++)if(n[s].name==e.name){var i=n[s];i.msg.push(e.msgBody);break}}),ce()(ie,"CHANGENAV",function(t,e){t.navSelect=e}),ce()(ie,"DELETEMSG",function(t,e){t.msgLog.forEach(function(t,n){(t.name=e)&&(t.msg=[])})}),ce()(ie,"CHATRECORD",function(t,e){var n=t.chatrecord;n.some(function(t){return t.id==e.id})||n.push(e)}),ie);m.a.use(F.a);var le={userId:"",userIcon:"",navSelect:"homeMsg",msgLog:[],chatrecord:[]},de=new F.a.Store({state:le,mutations:ue,actions:ae});n("hQIm");n.e(1).then(n.bind(null,"7FJ3")),m.a.config.productionTip=!1,m.a.prototype.$http=f.a,new m.a({el:"#app",store:de,router:oe,template:"<App/>",components:{App:S}})},P0OH:function(t,e){},T569:function(t,e){},hQIm:function(t,e){!function(t,e){function n(){var e=o.getBoundingClientRect().width;e/c>540&&(e=540*c);var n=e/10;o.style.fontSize=n+"px",l.rem=t.rem=n}var s,i=t.document,o=i.documentElement,a=i.querySelector('meta[name="viewport"]'),r=i.querySelector('meta[name="flexible"]'),c=0,u=0,l=e.flexible||(e.flexible={});if(a){console.warn("将根据已有的meta标签来设置缩放比例");var d=a.getAttribute("content").match(/initial\-scale=([\d\.]+)/);d&&(u=parseFloat(d[1]),c=parseInt(1/u))}else if(r){var m=r.getAttribute("content");if(m){var h=m.match(/initial\-dpr=([\d\.]+)/),f=m.match(/maximum\-dpr=([\d\.]+)/);h&&(c=parseFloat(h[1]),u=parseFloat((1/c).toFixed(2))),f&&(c=parseFloat(f[1]),u=parseFloat((1/c).toFixed(2)))}}if(!c&&!u){var v=(t.navigator.appVersion.match(/android/gi),t.navigator.appVersion.match(/iphone/gi)),p=t.devicePixelRatio;c=v?p>=3&&(!c||c>=3)?3:p>=2&&(!c||c>=2)?2:1:1,u=1/c}if(o.setAttribute("data-dpr",c),!a)if(a=i.createElement("meta"),a.setAttribute("name","viewport"),a.setAttribute("content","initial-scale="+u+", maximum-scale="+u+", minimum-scale="+u+", user-scalable=no"),o.firstElementChild)o.firstElementChild.appendChild(a);else{var g=i.createElement("div");g.appendChild(a),i.write(g.innerHTML)}t.addEventListener("resize",function(){clearTimeout(s),s=setTimeout(n,300)},!1),t.addEventListener("pageshow",function(t){t.persisted&&(clearTimeout(s),s=setTimeout(n,300))},!1),"complete"===i.readyState?i.body.style.fontSize=12*c+"px":i.addEventListener("DOMContentLoaded",function(t){i.body.style.fontSize=12*c+"px"},!1),n(),l.dpr=t.dpr=c,l.refreshRem=n,l.rem2px=function(t){var e=parseFloat(t)*this.rem;return"string"==typeof t&&t.match(/rem$/)&&(e+="px"),e},l.px2rem=function(t){var e=parseFloat(t)/this.rem;return"string"==typeof t&&t.match(/px$/)&&(e+="rem"),e}}(window,window.lib||(window.lib={}))},o4Ct:function(t,e){},wo40:function(t,e){},xxqs:function(t,e){}},["NHnr"]);
//# sourceMappingURL=app.js.map